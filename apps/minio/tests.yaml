schemaVersion: 2.0.0

commandTests:
  - name: "minio version check"
    command: "/usr/local/bin/minio"
    args: ["--version"]
    exitCode: 0

  - name: "minio help"
    command: "/usr/local/bin/minio"
    args: ["--help"]
    exitCode: 0

fileExistenceTests:
  - name: "minio binary exists"
    path: "/usr/local/bin/minio"
    shouldExist: true
    permissions: "-rwxr-xr-x"

  - name: "entrypoint script exists"
    path: "/usr/local/bin/entrypoint.sh"
    shouldExist: true
    permissions: "-rwxr-xr-x"

  - name: "ca-certificates installed"
    path: "/etc/ssl/certs/ca-certificates.crt"
    shouldExist: true

metadataTest:
  user: "minio"
  exposedPorts: ["9000", "9001"]
  volumes: ["/data"]
  entrypoint: ["/usr/local/bin/entrypoint.sh"]
  cmd: ["minio", "server", "/data", "--console-address=:9001"]